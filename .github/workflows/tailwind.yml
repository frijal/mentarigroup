name: ğŸ”° Build & Update Tailwind CSS

on:
  schedule:
    - cron: '0 19 */14 * *' # 19:00 UTC = 03:00 WITA (keesokan harinya)
  workflow_dispatch:

permissions:
  contents: write

jobs:
  build_and_commit: # Nama job diubah agar lebih jelas
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ${{ github.workspace }}
    steps:
      - name: ğŸ“¦ Checkout repository
        uses: actions/checkout@v4

      - name: âš™ï¸ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'

      - name: ğŸ§± Cache node_modules
        uses: actions/cache@v4
        with:
          path: node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('package-lock.json') }}
          restore-keys: |
            ${{ runner.os }}-modules-

      - name: ğŸ“¥ Install dependencies
        run: npm install

    #  - name: ğŸ“¦ Install TailwindCSS & Plugins
    #    run:
        #   npm install -D tailwindcss
     #      npm install @tailwindcss/forms @tailwindcss/typography @tailwindcss/aspect-ratio @tailwindcss/container-queries
             
     
      - name: ğŸ¨ Build Tailwind CSS (Koki Memasak Soto)
        run:  npx tailwindcss -c ./sementara/tailwind.config.js -i ./sementara/tailwind.config.css -o ./ext/tailwind.css
      #  run: npx tailwindcss -i sementara/tailwind.config.css -o ext/tailwind.css
      
      - name: ğŸ’¾ Commit and push changes (Koki Menyimpan Soto ke Dapur)
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          # Pesan commit yang akan muncul di riwayat repo Anda
          commit_message: ğŸ¤– Bot Build and update tailwind.css
          # Beri tahu action file mana yang harus di-commit
          file_pattern: ext/tailwind.css
