<!DOCTYPE html>
<html lang="id">
<head>
  <!-- Title -->
  <title>Recursive HTTP Album Viewer (via JSON)</title>
  <!-- Charset & Viewport -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Canonical -->
  <link rel="canonical" href="https://frijal.pages.dev/artikel/recursive-http-album-viewer-json.html">
  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <!-- SEO Meta -->
  <meta name="description" content="Recursive HTTP Album Viewer (via JSON) memungkinkan penjelajahan album gambar langsung dari server HTTP dengan data JSON. Mendukung navigasi folder, thumbnail, dan tampilan responsif.">
  <meta name="keywords" content="Recursive HTTP Album Viewer, JSON album viewer, galeri HTTP, viewer interaktif, web album, responsive gallery">
  <meta name="author" content="Frijal">
  <!-- Open Graph (Facebook, LinkedIn, WhatsApp) -->
  <meta property="og:type" content="article">
  <meta property="og:title" content="Recursive HTTP Album Viewer (via JSON)">
  <meta property="og:description" content="Jelajahi album gambar langsung dari server HTTP dengan data JSON. Navigasi interaktif, thumbnail, dan tampilan responsif.">
  <meta property="og:url" content="https://frijal.pages.dev/artikel/recursive-http-album-viewer-json.html">
  <meta property="og:site_name" content="Frijal Pages">
  <meta property="og:image" content="https://frijal.pages.dev/img/recursive-http-album-viewer-json.webp">
  <meta property="og:locale" content="id_ID">
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Recursive HTTP Album Viewer (via JSON)">
  <meta name="twitter:description" content="Album gambar dari server HTTP berbasis JSON dengan navigasi interaktif dan tampilan responsif.">
  <meta name="twitter:image" content="https://frijal.pages.dev/img/recursive-http-album-viewer-json.webp">
  <meta name="twitter:site" content="@frijal">

    <style>
        /* --- Global & Tipografi --- */
        *, *::before, *::after {
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            margin: 0;
            padding: 24px;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-top: 0;
        }
        /* --- Kontainer Utama --- */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            min-height: 0; /* Mencegah flexbox overflow */
        }
        /* --- Kontrol & Pesan --- */
        .controls {
            padding: 16px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .url-loader {
            display: flex;
            gap: 10px;
        }

        #jsonUrlInput {
            flex-grow: 1;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            font-family: inherit;
        }
        #loadAlbumBtn {
            padding: 12px 24px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            background-color: #3498db;
            color: white;
        }
        #loadAlbumBtn:hover {
            background-color: #2980b9;
        }
        #loadAlbumBtn:disabled {
            background-color: #bdc3c7;
            cursor: wait;
        }

        .welcome-message {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
            color: #777;
        }

        /* --- Area Viewer (Dua Kolom) --- */
        .viewer-area {
            display: flex;
            flex-grow: 1;
            margin-top: 20px;
            gap: 20px;
            min-height: 0;
        }
        /* --- 1. Kolom Viewer Utama --- */
        .main-display-wrapper {
            flex: 3; /* Kolom kiri lebih besar */
            display: flex;
            flex-direction: column;
            min-width: 0;
        }
        .display-area {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background: #fff;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            min-height: 0;
        }
        #imageDisplay {
            display: block;
            width: 100%;
            height: auto;
            flex-grow: 1;
            object-fit: contain;
            background-color: #f0f0f0;
            min-height: 0;
        }
        .caption-wrapper {
            display: flex;
            align-items: stretch;
            border-top: 1px solid #ddd;
            flex-shrink: 0;
        }
        figcaption {
            padding: 16px;
            font-family: "Courier New", Courier, monospace;
            font-size: 1.1rem;
            color: #e74c3c;
            background-color: #f9f9f9;
            word-break: break-all;
            line-height: 1.5;
            flex-grow: 1;
            overflow-x: auto; /* Scroll jika URL terlalu panjang */
        }

        figcaption:empty::before {
            content: "Pilih gambar dari galeri...";
            color: #999;
            font-style: italic;
            font-family: sans-serif;
        }
        #copyBtn {
            flex-shrink: 0;
            padding: 0 20px;
            font-size: 0.9rem;
            font-weight: 600;
            border: none;
            border-left: 1px solid #ddd;
            border-radius: 0;
            background-color: #f0f0f0;
            color: #333;
            cursor: pointer;
        }
        #copyBtn:disabled { background-color: #f9f9f9; color: #ccc; cursor: not-allowed; }
        #copyBtn.copied { background-color: #2ecc71; color: white; }
        .action-button-container {
            margin-top: 10px;
            text-align: center;
            flex-shrink: 0;
        }
        .action-btn {
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            background-color: #2ecc71;
            color: white !important;
            padding: 10px 20px;
            border-radius: 6px;
        }
        .action-btn:hover { background-color: #27ae60; }

        /* --- 2. Kolom Galeri Album --- */
        .album-grid-wrapper {
            flex: 1; /* Kolom kanan lebih kecil */
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            min-width: 0;
        }
        .album-grid-wrapper h2 {
            margin: 0 0 16px 0;
            font-size: 1.3rem;
            color: #2c3e50;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            flex-shrink: 0;
        }
        .album-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
        }

        .thumbnail {
            border: 2px solid #ddd;
            border-radius: 6px;
            overflow: hidden;
            cursor: pointer;
            transition: border-color 0.2s;
            background: #f0f0f0;
        }
        .thumbnail:hover {
            border-color: #3498db;
        }
        .thumbnail.active {
            border-color: #3498db;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.5);
        }
        .thumbnail img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            display: block;
        }
        .thumbnail p {
            margin: 0;
            padding: 6px;
            font-size: 0.75rem;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            background: #f9f9f9;
            color: #555;
        }

        /* --- Responsif (Mobile) --- */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                height: auto;
            }
            .viewer-area {
                flex-direction: column;
                height: auto;
            }
            .album-grid-wrapper {
                flex-direction: row;
                overflow-x: auto;
                overflow-y: hidden;
                flex: none;
                height: 150px;
            }
            .album-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                grid-auto-flow: column;
                grid-auto-columns: minmax(100px, 1fr);
            }
            .album-grid-wrapper h2 {
                display: none;
            }
        }
    </style>
<meta property="og:image:alt" content="Recursive HTTP Album Viewer (via JSON)">
  <meta itemprop="image" content="https://frijal.pages.dev/img/recursive-http-album-viewer-json.webp">
<link rel="stylesheet" href="/ext/marquee-url.css"><link rel="alternate" type="application/rss+xml" title="30 artikel baru bikin." href="https://frijal.pages.dev/rss.xml" />
    <meta property="article:published_time" content="2025-10-25T13:28:45.354+00:00">
</head>
<body>
    <div class="container">
        <h1>Recursive HTTP Album Viewer</h1>
<div id="iposbrowser"></div>
        <div class="controls">
            <label for="jsonUrlInput" style="display:block; margin-bottom: 10px; font-weight: 600;">Masukkan URL ke file <code>album.json</code> Anda:</label>
            <div class="url-loader">
                <input type="text" id="jsonUrlInput" placeholder="https://situs-anda.com/path/ke/album.json">
                <button id="loadAlbumBtn">Muat Album</button>
            </div>
        </div>
        <div id="welcomeMessage" class="welcome-message">
            <p>Alat ini akan memuat daftar gambar dari file <code>.json</code> yang ada di server Anda.</p>
            <p style="font-size: 0.9rem; color: #999;">Pastikan file <code>.json</code> Anda berisi array string path gambar, contoh: <br><code>["foto1.jpg", "subfolder/foto2.png"]</code></p>
        </div>
        <div id="viewerArea" class="viewer-area" style="display: none;">
            <div class="main-display-wrapper">
                <figure class="display-area">
                    <img id="imageDisplay" src="" alt="Gambar yang dipilih">
                    <div class="caption-wrapper">
                        <figcaption id="imageCaption"></figcaption>
                        <button id="copyBtn" title="Salin Lokasi" disabled>ðŸ“‹ Salin</button>
                    </div>
                </figure>
                <div id="actionButtonContainer" class="action-button-container">
                    </div>
            </div>
            <div class="album-grid-wrapper">
                <h2>Galeri Album (<span id="imageCount">0</span>)</h2>
                <div id="albumGrid" class="album-grid">
                    </div>
            </div>
        </div> </div> <script>
        // --- Ambil Elemen DOM ---
        const jsonUrlInput = document.getElementById('jsonUrlInput');
        const loadAlbumBtn = document.getElementById('loadAlbumBtn');

        const welcomeMessage = document.getElementById('welcomeMessage');
        const viewerArea = document.getElementById('viewerArea');

        const imageDisplay = document.getElementById('imageDisplay');
        const imageCaption = document.getElementById('imageCaption');
        const copyBtn = document.getElementById('copyBtn');
        const actionBtnContainer = document.getElementById('actionButtonContainer');

        const albumGrid = document.getElementById('albumGrid');
        const imageCount = document.getElementById('imageCount');
        // --- Variabel Global ---
        let allImageData = []; // Menyimpan { name, path (relatif), fullUrl }
        let baseURL = '';
        /**
         * Memicu pengambilan data saat tombol diklik
         */
        loadAlbumBtn.addEventListener('click', () => {
            const url = jsonUrlInput.value.trim();
            if (!url) {
                alert('Silakan masukkan URL ke file .json');
                return;
            }
            fetchAlbumData(url);
        });
        /**
         * Event utama: Mengambil dan memproses file JSON
         */
        async function fetchAlbumData(url) {
            loadAlbumBtn.disabled = true;
            loadAlbumBtn.textContent = 'Memuat...';
            cleanupOldAlbum();
            try {
                // Tentukan baseURL (folder tempat .json berada)
                // Contoh: https://.../album/data.json -> https://.../album/
                baseURL = url.substring(0, url.lastIndexOf('/') + 1);
                // 1. Ambil file JSON
                const response = await fetch(url, { cache: 'no-store' }); // Jangan cache list
                if (!response.ok) {
                    throw new Error(`Gagal mengambil data: ${response.statusText}`);
                }

                // 2. Parse JSON
                const imagePaths = await response.json();
                if (!Array.isArray(imagePaths)) {
                    throw new Error('File JSON tidak berisi array.');
                }
                // 3. Proses setiap path gambar
                for (let i = 0; i < imagePaths.length; i++) {
                    const relativePath = imagePaths[i];

                    // Cek jika path adalah string non-kosong
                    if (typeof relativePath === 'string' && relativePath) {
                        const fullUrl = baseURL + relativePath;
                        const name = relativePath.split('/').pop(); // Ambil nama file

                        const imgData = {
                            name: name,
                            path: relativePath,
                            fullUrl: fullUrl
                        };

                        allImageData.push(imgData);
                        createThumbnail(imgData, i);
                    }
                }
                // 4. Update UI
                imageCount.textContent = allImageData.length;
                welcomeMessage.style.display = 'none';
                viewerArea.style.display = 'flex';
                if (allImageData.length > 0) {
                    displayImage(0); // Tampilkan gambar pertama
                } else {
                    imageCaption.textContent = 'Tidak ada gambar yang ditemukan dalam file JSON.';
                }
            } catch (err) {
                alert(`Error: ${err.message}. Pastikan URL benar dan file JSON valid.`);
                console.error(err);
                welcomeMessage.style.display = 'block'; // Tampilkan lagi pesan
                viewerArea.style.display = 'none';
            } finally {
                loadAlbumBtn.disabled = false;
                loadAlbumBtn.textContent = 'Muat Album';
            }
        }
        /**
         * Membuat dan menambahkan thumbnail ke galeri
         */
        function createThumbnail(imgData, index) {
            const thumbDiv = document.createElement('div');
            thumbDiv.className = 'thumbnail';
            thumbDiv.dataset.index = index;

            thumbDiv.innerHTML = `
                <img src="${imgData.fullUrl}" alt="${imgData.name}" loading="lazy">
                <p title="${imgData.path}">${imgData.name}</p>
            `;

            thumbDiv.addEventListener('click', () => {
                displayImage(index);
            });

            albumGrid.appendChild(thumbDiv);
        }
        /**
         * Menampilkan gambar yang dipilih di viewer utama
         */
        function displayImage(index) {
            if (index < 0 || index >= allImageData.length) return;

            const imgData = allImageData[index];

            imageDisplay.src = imgData.fullUrl;
            // Caption sekarang adalah URL LENGKAP
            imageCaption.textContent = imgData.fullUrl;
            copyBtn.disabled = false;

            // Tampilkan tombol "Open URL Location"
            showRemoteAction(imgData.fullUrl);
            // Beri highlight pada thumbnail yang aktif
            document.querySelectorAll('.thumbnail.active').forEach(th => th.classList.remove('active'));
            document.querySelector(`.thumbnail[data-index="${index}"]`).classList.add('active');
        }
        /**
         * Membersihkan data album sebelumnya
         */
        function cleanupOldAlbum() {
            allImageData = [];
            baseURL = '';
            albumGrid.innerHTML = '';
            imageDisplay.src = '';
            imageCaption.textContent = '';
            copyBtn.disabled = true;
            imageCount.textContent = '0';
        }
        /**
         * Event listener untuk tombol copy
         */
        copyBtn.addEventListener('click', () => {
            const textToCopy = imageCaption.textContent;
            if (!textToCopy) return;
            navigator.clipboard.writeText(textToCopy).then(() => {
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = 'âœ… Tersalin!';
                copyBtn.classList.add('copied');
                copyBtn.disabled = true;

                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.classList.remove('copied');
                    copyBtn.disabled = false;
                }, 1500);
            }).catch(err => {
                console.error('Gagal menyalin:', err);
                alert('Gagal menyalin.');
            });
        });
        /**
         * Fungsi untuk menampilkan tombol "Open URL"
         */
        function showRemoteAction(url) {
            actionBtnContainer.innerHTML = ''; // Kosongkan dulu

            const link = document.createElement('a');
            link.href = url;
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
            link.className = 'action-btn';
            link.textContent = 'Buka Lokasi URL';

            actionBtnContainer.appendChild(link);
        }
        // Menangani error jika gambar gagal dimuat
        imageDisplay.onerror = () => {
            imageCaption.textContent = 'Error: Gagal memuat gambar dari URL ini.';
            copyBtn.disabled = true; // Nonaktifkan copy jika gambar error
        };
    </script>
<div class="search-floating-container"><input type="text" id="floatingSearchInput" placeholder="cari artikel..." autocomplete="off"><span id="floatingSearchClear" class="clear-button"></span><div id="floatingSearchResults" class="floating-results-container"></div></div>
<section id="related-marquee-section"><div id="related-marquee-container"></div></section><script defer src="/ext/marquee-url.js"></script>
<script defer src="/ext/iposbrowser.js"></script><script defer src="/ext/markdown.js"></script>
</body>
</html>