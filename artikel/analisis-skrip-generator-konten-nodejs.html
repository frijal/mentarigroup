<!DOCTYPE html>
<html lang="id">
<head>
    <!-- Metadata Dasar -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bedah Skrip Generator Konten Cerdas (Node.js)</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Bedah tuntas skrip Node.js canggih yang mengotomatiskan pembuatan artikel.json, sitemap.xml, dan halaman kategori, lengkap dengan fitur self-healing.">
    <meta name="keywords" content="nodejs, generator, static site generator, ssg, javascript, otomasi, ci/cd, frijal pages">
    <meta name="author" content="Frijal">
    <link rel="canonical" href="https://frijal.pages.dev/artikel/analisis-skrip-generator-konten-nodejs.html">

    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">

    <!-- Open Graph (untuk Facebook, LinkedIn, dll) -->
    <meta property="og:title" content="Bedah Skrip 'Ajaib': Generator Konten Otomatis dengan Node.js">
    <meta property="og:description" content="Lihat bagaimana sebuah skrip Node.js bisa secara cerdas mengelola konten, membuat sitemap, dan bahkan memperbaiki datanya sendiri.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://frijal.pages.dev/artikel/analisis-skrip-generator-konten-nodejs.html">
    <meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjFck_UrHNNPuq7efqdzls4mrrPJv3ZRlKibwYD3w1FVCgAu0NlzQz2LDieWiUg2nsgJiFT_dr-oShXctQ3K1BckCglQ0rkOoxuYC9ceIYwSRIqt14efmNgMJDoYqBtyJalfWy3Eok6yKh-08bSSYmvyFfE7ZWpqqk9_hVC-sI8wUdjycBO22uAwFoCu-E/s1600/licensed-image.webp"> <!-- GANTI DENGAN URL GAMBAR KAMU -->
    <meta property="og:site_name" content="Frijal's Page">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Bedah Skrip 'Ajaib': Generator Konten Otomatis dengan Node.js">
    <meta name="twitter:description" content="Lihat bagaimana sebuah skrip Node.js bisa secara cerdas mengelola konten, membuat sitemap, dan bahkan memperbaiki datanya sendiri.">
    <meta name="twitter:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjFck_UrHNNPuq7efqdzls4mrrPJv3ZRlKibwYD3w1FVCgAu0NlzQz2LDieWiUg2nsgJiFT_dr-oShXctQ3K1BckCglQ0rkOoxuYC9ceIYwSRIqt14efmNgMJDoYqBtyJalfWy3Eok6yKh-08bSSYmvyFfE7ZWpqqk9_hVC-sI8wUdjycBO22uAwFoCu-E/s1600/licensed-image.webp"> <!-- GANTI DENGAN URL GAMBAR KAMU -->
    <meta name="twitter:creator" content="@frijal"> <!-- GANTI DENGAN USERNAME TWITTER KAMU -->

    <!-- CSS & Font -->
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>:root {
    --bg-color: #1a1a2e;
    --primary-color: #16213e;
    --secondary-color: #0f3460;
    --text-color: #dcdcdc;
    --header-color: #ffffff;
    --code-bg: #2d2d44;
    --border-color: #3a3a5a;
    --accent-init: #3498db;   /* Biru */
    --accent-clean: #e67e22;  /* Oranye */
    --accent-process: #9b59b6; /* Ungu */
    --accent-heal: #2ecc71;   /* Hijau */
    --accent-write: #e74c3c;  /* Merah */
}

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    line-height: 1.8;
    margin: 0;
    padding: 20px;
}

.container {
    max-width: 900px;
    margin: 40px auto;
    background-color: var(--primary-color);
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    overflow: hidden;
}

header {
    background: linear-gradient(45deg, #16213e, #0f3460);
    padding: 40px;
    text-align: center;
    border-bottom: 5px solid var(--border-color);
}

header h1 {
    color: var(--header-color);
    font-size: 2.5rem;
    margin: 0;
    font-weight: 700;
}

header .subtitle {
    color: var(--text-color);
    font-size: 1.1rem;
    margin-top: 10px;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
}

main {
    padding: 30px 40px;
}

article h2 {
    color: var(--header-color);
    font-size: 1.8rem;
    border-bottom: 2px solid var(--border-color);
    padding-bottom: 10px;
    margin-bottom: 20px;
}

article h3 {
    color: var(--header-color);
    margin-top: 40px;
}

article ol { padding-left: 20px; }

.timeline {
    position: relative;
    margin: 40px 0;
    padding-left: 30px;
}
.timeline::before {
    content: '';
    position: absolute;
    left: 10px;
    top: 10px;
    bottom: 10px;
    width: 4px;
    background: var(--border-color);
    border-radius: 2px;
}

.timeline-item {
    position: relative;
    margin-bottom: 40px;
}
.timeline-item:last-child { margin-bottom: 0; }

.timeline-icon {
    position: absolute;
    left: -20px;
    top: 0;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 1.4rem;
    border: 4px solid var(--primary-color);
}
.timeline-icon.init { background-color: var(--accent-init); }
.timeline-icon.clean { background-color: var(--accent-clean); }
.timeline-icon.process { background-color: var(--accent-process); }
.timeline-icon.heal { background-color: var(--accent-heal); }
.timeline-icon.write { background-color: var(--accent-write); }

.timeline-content { padding-left: 30px; }
.timeline-content h3 {
    margin: 0 0 5px 0; font-size: 1.4rem;
    color: var(--header-color); font-weight: 600;
}
.timeline-content p { font-size: 1rem; margin: 0; }

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
}
.feature-item {
    background-color: var(--secondary-color);
    padding: 20px;
    border-radius: 8px;
    text-align: center;
}
.feature-item i {
    font-size: 2rem;
    color: var(--header-color);
    margin-bottom: 10px;
}
.feature-item h4 {
    margin: 0 0 5px 0;
    font-size: 1.1rem;
    color: var(--header-color);
}
.feature-item p { font-size: 0.9rem; margin: 0; }

.share-section {
    text-align: center; margin-top: 50px;
    padding-top: 30px; border-top: 2px solid var(--border-color);
}
.share-section h3 { color: var(--header-color); margin-bottom: 20px; }
.social-icons { display: flex; justify-content: center; gap: 15px; }

.social-icon, .copy-link {
    display: inline-flex; justify-content: center; align-items: center;
    width: 45px; height: 45px; border-radius: 50%;
    color: white; text-decoration: none; font-size: 1.2rem;
    transition: transform 0.3s, background-color 0.3s;
}
.social-icon:hover, .copy-link:hover { transform: translateY(-5px); }
.twitter { background: #1DA1F2; } .facebook { background: #1877F2; }
.whatsapp { background: #25D366; } .linkedin { background: #0A66C2; }
.copy-link { background: #6c757d; border: none; cursor: pointer; }

footer {
    text-align: center; padding: 20px;
    background-color: var(--secondary-color);
    color: var(--text-color); font-size: 0.9rem; margin-top: 40px;
}
footer a { color: var(--header-color); text-decoration: none; }

@media (max-width: 768px) {
    body { padding: 0; }
    .container { border-radius: 0; margin: 0; }
    header h1 { font-size: 1.8rem; }
    main { padding: 20px; }
    .timeline { padding-left: 20px; }
    .timeline-icon { left: -10px; }
}

</style>
<meta property="og:image:alt" content="Bedah Skrip Generator Konten Cerdas (Node.js)">
  <meta itemprop="image" content="https://frijal.pages.dev/img/analisis-skrip-generator-konten-nodejs.webp">
<link rel="stylesheet" href="/ext/marquee-url.css"><link rel="alternate" type="application/rss+xml" title="30 artikel baru bikin." href="https://frijal.pages.dev/rss.xml" />
    <meta property="article:published_time" content="2025-10-22T12:23:43.380+00:00">
</head>
<body>

    <div class="container">
        <header>
            <h1>Bedah Skrip Generator Konten Cerdas 🧠</h1>
<div id="iposbrowser"></div>
            <p class="subtitle">Melihat lebih dalam cara kerja `generator.js`, sebuah skrip otomasi canggih yang menjadi tulang punggung pengelolaan konten situs ini.</p>
        </header>

        <main>
            <article>
                <h2>Tujuan Utama: Sang Asisten Digital</h2>
                <p>Pada dasarnya, skrip ini adalah asisten digital yang mengambil alih semua tugas membosankan. Tujuannya adalah membaca semua artikel <code>.html</code>, mengekstrak data penting, lalu menghasilkan tiga hal utama:</p>
                <ol>
                    <li>Sebuah "database" pusat dalam format JSON (<code>artikel.json</code>).</li>
                    <li>Sebuah <code>sitemap.xml</code> yang selalu up-to-date untuk SEO.</li>
                    <li>Halaman-halaman kategori artikel yang dibuat secara otomatis.</li>
                </ol>

                <h2>Alur Kerja: Bagaimana Si Cerdas Bekerja</h2>
                <p>Skrip ini tidak hanya bekerja, tapi bekerja dengan alur yang efisien dan tangguh. Berikut adalah visualisasi prosesnya:</p>

<div class="image-container">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjFck_UrHNNPuq7efqdzls4mrrPJv3ZRlKibwYD3w1FVCgAu0NlzQz2LDieWiUg2nsgJiFT_dr-oShXctQ3K1BckCglQ0rkOoxuYC9ceIYwSRIqt14efmNgMJDoYqBtyJalfWy3Eok6yKh-08bSSYmvyFfE7ZWpqqk9_hVC-sI8wUdjycBO22uAwFoCu-E/s1600/licensed-image.webp" alt="Diagram alur kerja skrip generator.js" style="width:100%; height:auto; border-radius: 8px;">
</div>

<h3>Kode Lengkap: <code>generator.js</code></h3>
<p>Berikut adalah kode lengkap dari skrip generator konten cerdas yang kita bedah di atas.</p>

<div class="code-block">
    <pre><code>import fs from 'fs/promises';
import path from 'path';
import { fileURLToPath } from 'url';
import { titleToCategory } from './titleToCategory.js';

// ==================================================================
// KONFIGURASI TERPUSAT
// ===================================================================
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const CONFIG = {
  rootDir: path.join(__dirname, '..'),
  artikelDir: path.join(__dirname, '..', 'artikel'),
  masterJson: path.join(__dirname, '..', 'artikel', 'artikel.json'),
  jsonOut: path.join(__dirname, '..', 'artikel.json'),
  xmlOut: path.join(__dirname, '..', 'sitemap.xml'),
  baseUrl: 'https://frijal.pages.dev',
  defaultThumbnail: 'https://frijal.pages.dev/thumbnail.webp',
  xmlPriority: '0.6',
  xmlChangeFreq: 'monthly',
};

// ===================================================================
// FUNGSI-FUNGSI BANTUAN (HELPER FUNCTIONS)
// ===================================================================

function formatISO8601(date) {
  const d = new Date(date);
  if (isNaN(d)) {
    console.warn(`⚠️ Tanggal tidak valid, fallback ke sekarang.`);
    return new Date().toISOString();
  }
  const tzOffset = -d.getTimezoneOffset();
  const diff = tzOffset >= 0 ? '+' : '-';
  const pad = (n) => String(Math.floor(Math.abs(n))).padStart(2, '0');
  const hours = pad(tzOffset / 60);
  const minutes = pad(tzOffset % 60);
  return d.toISOString().replace('Z', `${diff}${hours}:${minutes}`);
}

function extractPubDate(content) {
  const match = content.match(
    /&lt;meta\s+property=["']article:published_time["'][^>]+content=["']([^"']+)["']/i,
  );
  return match ? match[1].trim() : null;
}

function extractTitle(content) {
  const match = content.match(/&lt;title>([\s\S]*?)&lt;\/title>/i);
  return match ? match[1].trim() : 'Tanpa Judul';
}

function extractDescription(content) {
  const match = content.match(
    /&lt;meta\s+name=["']description["'][^>]+content=["']([^"']+)["']/i,
  );
  return match ? match[1].trim() : '';
}

function fixTitleOneLine(content) {
  return content.replace(
    /&lt;title>([\s\S]*?)&lt;\/title>/gi,
    (m, p1) => `&lt;title>${p1.trim()}&lt;/title>`,
  );
}

function extractImage(content) {
  const ogMatch = content.match(
    /&lt;meta[^>]+property=["']og:image["'][^>]+content=["'](.*?)["']/i,
  );
  if (ogMatch && ogMatch[1]) {
    const src = ogMatch[1].trim();
    const validExt = /\.(jpe?g|png|gif|webp|avif|svg)$/i;
    if (validExt.test(src.split('?')[0])) return src;
  }

  const imgMatch = content.match(/&lt;img[^>]+src=["'](.*?)["']/i);
  if (imgMatch && imgMatch[1]) {
    const src = imgMatch[1].trim();
    const validExt = /\.(jpe?g|png|gif|webp|avif|svg)$/i;
    if (validExt.test(src.split('?')[0])) return src;
  }

  return CONFIG.defaultThumbnail;
}

function formatJsonOutput(obj) {
  return JSON.stringify(obj, null, 2)
    .replace(/\[\s*\[/g, '[\n      [')
    .replace(/\]\s*\]/g, ']\n    ]')
    .replace(/(\],)\s*\[/g, '$1\n      [');
}

async function generateCategoryPages(groupedData) {
  console.log('🔄 Memulai pembuatan halaman kategori...');
  const kategoriDir = path.join(CONFIG.artikelDir, '-');
  const templatePath = path.join(kategoriDir, 'template-kategori.html');

  try {
    await fs.access(templatePath);
    const templateContent = await fs.readFile(templatePath, 'utf8');

    for (const categoryName in groupedData) {
      // Hilangkan emoji & ubah ke slug
      const noEmoji = categoryName.replace(/^[^\w\s]*/, '').trim();
      const slug = noEmoji
        .toLowerCase()
        .replace(/ & /g, '-and-')
        .replace(/[^a-z0-9\s-]/g, '')
        .replace(/\s+/g, '-')
        .replace(/-+/g, '-');

      // RSS URL untuk kategori
      const rssUrl = `${CONFIG.baseUrl}/feed-${slug}.xml`;

      // URL halaman kategori
      const fileName = `${slug}.html`;
      const canonicalUrl = `${CONFIG.baseUrl}/artikel/-/${fileName}`;

      // Ambil emoji pertama (atau fallback)
      const icon = categoryName.match(/(\p{Emoji})/u)?.[0] || '📁';

      // Ganti placeholder di template
      let pageContent = templateContent
        .replace(/%%TITLE%%/g, noEmoji)
        .replace(/%%DESCRIPTION%%/g, `topik ${noEmoji}`)
        .replace(/%%CANONICAL_URL%%/g, canonicalUrl)
        .replace(/%%CATEGORY_NAME%%/g, categoryName)
        .replace(/%%ICON%%/g, icon)
        .replace(/%%RSS_URL%%/g, rssUrl);

      // Tulis file HTML hasil render
      await fs.writeFile(path.join(kategoriDir, fileName), pageContent, 'utf8');
      console.log(`✅ Halaman kategori dibuat: ${fileName}`);
    }

    console.log('👍 Semua halaman kategori berhasil dibuat.');
  } catch (error) {
    console.error(
      "❌ Gagal membuat halaman kategori. Pastikan 'template-kategori.html' ada di dalam folder 'artikel/-'.",
      error.message,
    );
  }
}

// ===================================================================
// FUNGSI UTAMA (MAIN GENERATOR)
// ===================================================================
const generate = async () => {
  console.log('🚀 Memulai proses generator...');
  try {
    await fs.access(CONFIG.artikelDir);
  } catch {
    console.error("❌ Folder 'artikel' tidak ditemukan. Proses dibatalkan.");
    return;
  }

  const filesOnDisk = (await fs.readdir(CONFIG.artikelDir)).filter((f) =>
    f.endsWith('.html'),
  );
  const existingFilesOnDisk = new Set(filesOnDisk);
  let grouped = {};

  try {
    const masterContent = await fs.readFile(CONFIG.masterJson, 'utf8');
    grouped = JSON.parse(masterContent);
    console.log('📂 Master JSON berhasil dimuat.');
  } catch {
    console.warn(
      '⚠️ Master JSON (artikel/artikel.json) tidak ditemukan, memulai dari awal.',
    );
  }

  const cleanedGrouped = {};
  let deletedCount = 0;
  for (const category in grouped) {
    const survivingArticles = grouped[category].filter((item) => {
      if (!existingFilesOnDisk.has(item[1])) {
        console.log(
          `🗑️ File terhapus terdeteksi, menghapus dari data: ${item[1]}`,
        );
        deletedCount++;
        return false;
      }
      return true;
    });
    if (survivingArticles.length > 0) {
      cleanedGrouped[category] = survivingArticles;
    }
  }
  grouped = cleanedGrouped;

  const existingFiles = new Set(
    Object.values(grouped)
      .flat()
      .map((item) => item[1]),
  );
  let newArticlesCount = 0;

  for (const file of filesOnDisk) {
    try {
      if (existingFiles.has(file)) continue;

      const fullPath = path.join(CONFIG.artikelDir, file);
      let content = await fs.readFile(fullPath, 'utf8');
      let needsSave = false;

      const fixedTitleContent = fixTitleOneLine(content);
      if (fixedTitleContent !== content) {
        content = fixedTitleContent;
        needsSave = true;
        console.log(`🔧 Merapikan &lt;title> di ${file}`);
      }

      const title = extractTitle(content);
      const category = titleToCategory(title);
      const image = extractImage(content);
      const description = extractDescription(content);

      let pubDate = extractPubDate(content);
      if (!pubDate) {
        const stats = await fs.stat(fullPath);
        pubDate = stats.mtime;
        const newMetaTag = `      &lt;meta property="article:published_time" content="${formatISO8601(pubDate)}">`;
        if (content.includes('&lt;/head>')) {
          content = content.replace('&lt;/head>', `${newMetaTag}\n&lt;/head>`);
          needsSave = true;
          console.log(`➕ Menambahkan meta tanggal ke '${file}'`);
        }
      }

      if (needsSave) {
        await fs.writeFile(fullPath, content, 'utf8');
      }

      const lastmod = formatISO8601(pubDate);
      if (!grouped[category]) grouped[category] = [];
      grouped[category].push([title, file, image, lastmod, description]);
      newArticlesCount++;
      console.log(`➕ Memproses artikel baru: ${file}`);
    } catch (error) {
      console.error(`❌ Gagal memproses file ${file}:`, error.message);
    }
  }

  // Cek apakah file output (artikel.json di root) sudah ada
  let isJsonOutMissing = false;
  try {
    await fs.access(CONFIG.jsonOut);
  } catch {
    isJsonOutMissing = true;
    console.log('🟡 File output artikel.json tidak ditemukan, akan dibuat ulang.');
  }

  // Tambahkan 'isJsonOutMissing' sebagai kondisi untuk menulis file
  if (newArticlesCount > 0 || deletedCount > 0 || isJsonOutMissing) {
    for (const category in grouped) {
      grouped[category].sort((a, b) => new Date(b[3]) - new Date(a[3]));
    }

    const xmlUrls = [];
    Object.values(grouped)
      .flat()
      .forEach((item) => {
        const [, file, image, lastmod] = item;
        xmlUrls.push(
          `  &lt;url>\n    &lt;loc>${CONFIG.baseUrl}/artikel/${file}&lt;/loc>\n    &lt;lastmod>${lastmod}&lt;/lastmod>\n    &lt;priority>${CONFIG.xmlPriority}&lt;/priority>\n    &lt;changefreq>${CONFIG.xmlChangeFreq}&lt;/changefreq>\n    &lt;image:image>\n      &lt;image:loc>${image}&lt;/image:loc>\n    &lt;/image:image>\n  &lt;/url>`,
        );
      });

    const jsonString = formatJsonOutput(grouped);
    await fs.writeFile(CONFIG.jsonOut, jsonString, 'utf8');

    const xmlContent = `&lt;?xml version="1.0" encoding="UTF-8"?>\n&lt;urlset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd http://www.google.com/schemas/sitemap/image/1.1 http://www.google.com/schemas/sitemap/1.1/sitemap-image.xsd" xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n${xmlUrls.join('\n')}\n&lt;/urlset>`;
    await fs.writeFile(CONFIG.xmlOut, xmlContent, 'utf8');

    await generateCategoryPages(grouped);

    console.log(
      `\n✅ Ringkasan: ${newArticlesCount} artikel baru ditambahkan, ${deletedCount} artikel lama dihapus.`,
    );
    if (isJsonOutMissing && newArticlesCount === 0 && deletedCount === 0) {
        console.log('✅ File artikel.json di root dibuat ulang karena tidak ada.');
    }
    console.log(
      '✅ artikel.json, sitemap.xml, dan halaman kategori berhasil diperbarui.',
    );
  } else {
    console.log('\n✅ Tidak ada perubahan. File tidak diubah.');
  }
};

// Menjalankan fungsi utama
generate();
</code></pre>
    <button class="copy-btn"><i class="far fa-copy"></i> Salin</button>
</div>

                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-icon init"><i class="fas fa-memory"></i></div>
                        <div class="timeline-content">
                            <h3>Langkah 1: Inisialisasi & Memuat Ingatan</h3>
                            <p>Skrip mulai dengan memuat <code>artikel/artikel.json</code>. File ini bertindak sebagai "ingatan" atau kondisi terakhir. Jika tidak ada, ia akan memulai dari nol.</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-icon clean"><i class="fas fa-sync-alt"></i></div>
                        <div class="timeline-content">
                            <h3>Langkah 2: Pembersihan & Sinkronisasi</h3>
                            <p>Ini bagian cerdasnya. Skrip membandingkan "ingatannya" dengan file yang benar-benar ada. Jika ada artikel yang sudah dihapus, datanya akan dibersihkan dari JSON.</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-icon process"><i class="fas fa-cogs"></i></div>
                        <div class="timeline-content">
                            <h3>Langkah 3: Memproses Artikel Baru</h3>
                            <p>Skrip mencari file <code>.html</code> baru yang belum ada di "ingatannya", lalu mengekstrak semua metadata penting: judul, deskripsi, gambar, dan tanggal.</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-icon heal"><i class="fas fa-magic"></i></div>
                        <div class="timeline-content">
                            <h3>Langkah 4: Perbaikan Otomatis (Self-Healing)</h3>
                            <p>Jika sebuah artikel tidak punya meta tag tanggal terbit, skrip akan mengambil tanggal modifikasi file, lalu <strong>menyuntikkan tag meta yang benar</strong> ke dalam file HTML tersebut. Ajaib!</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-icon write"><i class="fas fa-file-export"></i></div>
                        <div class="timeline-content">
                            <h3>Langkah 5: Menulis Output (Hanya Jika Perlu)</h3>
                            <p>Ini bagian efisiennya. Skrip hanya akan menulis ulang <code>artikel.json</code>, <code>sitemap.xml</code>, dan halaman kategori <strong>jika ada perubahan</strong>. Jika tidak, ia akan berhenti dan menghemat waktu.</p>
                        </div>
                    </div>
                </div>

                <h3>Fitur-Fitur Cerdas Lainnya</h3>
                <div class="features-grid">
                    <div class="feature-item">
                        <i class="fas fa-cog"></i>
                        <h4>Konfigurasi Terpusat</h4>
                        <p>Semua path dan pengaturan penting ada di satu tempat (objek <code>CONFIG</code>), membuatnya sangat mudah dipelihara.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-puzzle-piece"></i>
                        <h4>Fungsi yang Jelas</h4>
                        <p>Kode dipecah menjadi fungsi-fungsi kecil dengan satu tugas, seperti <code>extractTitle</code>, membuatnya mudah dibaca dan di-debug.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-image"></i>
                        <h4>Fallback Cerdas</h4>
                        <p>Jika tidak menemukan gambar di artikel, skrip akan otomatis menggunakan gambar thumbnail default yang sudah ditentukan.</p>
                    </div>
                </div>
            </article>

            <div class="share-section">
                <h3>Jaga Data Pribadi Tetap Aman</h3>
                <div class="social-icons">
                    <a href="#" class="social-icon twitter" id="share-twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon facebook" id="share-facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-icon whatsapp" id="share-whatsapp"><i class="fab fa-whatsapp"></i></a>
                    <a href="#" class="social-icon linkedin" id="share-linkedin"><i class="fab fa-linkedin-in"></i></a>
                    <button class="social-icon copy-link" id="copy-link-button"><i class="fas fa-link"></i></button>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 - <a href="https://frijal.pages.dev">frijal.pages.dev</a></p>
        </footer>
    </div>

    <script>document.addEventListener('DOMContentLoaded', () => {

    // --- Fungsi Tombol Salin Kode ---
    const allCopyButtons = document.querySelectorAll('.copy-btn');
    allCopyButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            // Temukan elemen <pre> terdekat sebelum tombol
            const preElement = e.currentTarget.previousElementSibling;
            if (!preElement) return;

            // Dapatkan teks dari elemen <code> di dalam <pre>
            const code = preElement.querySelector('code').innerText;

            navigator.clipboard.writeText(code).then(() => {
                const originalHTML = e.currentTarget.innerHTML;
                e.currentTarget.innerHTML = '<i class="fas fa-check"></i> Disalin!';
                e.currentTarget.disabled = true;
                e.currentTarget.style.backgroundColor = '#27ae60';
                setTimeout(() => {
                    e.currentTarget.innerHTML = originalHTML;
                    e.currentTarget.disabled = false;
                    e.currentTarget.style.backgroundColor = '#555';
                }, 2000);
            }).catch(err => {
                console.error('Gagal menyalin teks: ', err);
            });
        });
    });

    // --- Fungsi Berbagi ke Media Sosial ---
    const pageUrl = encodeURIComponent(window.location.href);
    const pageTitle = encodeURIComponent(document.title);
    const shareText = encodeURIComponent("Bedah skrip Node.js yang canggih untuk otomasi konten!");

    const shareLinks = {
        twitter: document.getElementById('share-twitter'),
        facebook: document.getElementById('share-facebook'),
        whatsapp: document.getElementById('share-whatsapp'),
        linkedin: document.getElementById('share-linkedin'),
        copyButton: document.getElementById('copy-link-button')
    };

    if (shareLinks.twitter) {
        shareLinks.twitter.href = `https://twitter.com/intent/tweet?url=${pageUrl}&text=${shareText}`;
        shareLinks.twitter.target = '_blank';
    }

    if (shareLinks.facebook) {
        shareLinks.facebook.href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`;
        shareLinks.facebook.target = '_blank';
    }

    if (shareLinks.whatsapp) {
        shareLinks.whatsapp.href = `https://api.whatsapp.com/send?text=${pageTitle}%20${pageUrl}`;
        shareLinks.whatsapp.target = '_blank';
    }

    if (shareLinks.linkedin) {
        shareLinks.linkedin.href = `https://www.linkedin.com/shareArticle?mini=true&url=${pageUrl}&title=${pageTitle}`;
        shareLinks.linkedin.target = '_blank';
    }

    if (shareLinks.copyButton) {
        shareLinks.copyButton.addEventListener('click', () => {
            navigator.clipboard.writeText(decodeURIComponent(pageUrl)).then(() => {
                const originalIcon = shareLinks.copyButton.innerHTML;
                shareLinks.copyButton.innerHTML = '<i class="fas fa-check"></i>';
                shareLinks.copyButton.disabled = true;
                setTimeout(() => {
                    shareLinks.copyButton.innerHTML = originalIcon;
                    shareLinks.copyButton.disabled = false;
                }, 2000);
            }).catch(err => {
                console.error('Gagal menyalin link: ', err);
            });
        });
    }
});

</script>
<div class="search-floating-container"><input type="text" id="floatingSearchInput" placeholder="cari artikel..." autocomplete="off"><span id="floatingSearchClear" class="clear-button"></span><div id="floatingSearchResults" class="floating-results-container"></div></div>
<section id="related-marquee-section"><div id="related-marquee-container"></div></section><script defer src="/ext/marquee-url.js"></script>
<script defer src="/ext/iposbrowser.js"></script><script defer src="/ext/markdown.js"></script>
</body>
</html>
